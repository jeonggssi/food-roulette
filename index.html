<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>랜덤 요리 뽑기</title>

<style>
body {
    background: radial-gradient(circle, #1a1a1a, #000);
    color: white;
    font-family: Arial;
    text-align: center;
}

h1 {
    margin-top: 30px;
    font-size: 42px;
    letter-spacing: 3px;
}

#roulette-container {
    position: relative;
    width: 300px;
    height: 80px;
    margin: 50px auto;
    overflow: hidden;
    border: 3px solid gold;
    border-radius: 10px;
    background: black;
}

/* 메뉴 리스트 */
#menu-list {
    position: absolute;
    width: 100%;
}

.menu-item {
    height: 80px;
    line-height: 80px;
    font-size: 28px;
}

/* 버튼 */
button {
    font-size: 24px;
    padding: 15px 40px;
    background: gold;
    border: none;
    border-radius: 10px;
    cursor: pointer;
}

button:hover {
    background: orange;
}

/* 결과 강조 */
.winner {
    font-size: 42px !important;
    color: gold;
    font-weight: bold;
    text-shadow: 0 0 20px gold;
}
</style>

</head>
<body>

<h1>랜덤 요리 뽑기</h1>

<div id="roulette-container">
    <div id="pointer"></div>
    <div id="menu-list"></div>
</div>

<button onclick="start()">START</button>

<script>
const menus = [
    "김치찌개",
    "스테이크",
    "파스타",
    "초밥",
    "치킨",
    "라멘",
    "삼겹살",
    "카레",
    "햄버거",
    "샤브샤브"
];

const list = document.getElementById("menu-list");

let extendedMenus = [];
for(let i=0;i<20;i++){
    extendedMenus = extendedMenus.concat(menus);
}

extendedMenus.forEach(menu=>{
    const div=document.createElement("div");
    div.className="menu-item";
    div.innerText=menu;
    list.appendChild(div);
});

let spinning=false;

function playSpinSound(duration=3500){
    const ctx=new AudioContext();
    const osc=ctx.createOscillator();
    const gain=ctx.createGain();

    osc.type="triangle";
    osc.frequency.setValueAtTime(100, ctx.currentTime);
    osc.frequency.exponentialRampToValueAtTime(40, ctx.currentTime+duration/1000);

    gain.gain.setValueAtTime(0.3, ctx.currentTime);
    gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime+duration/1000);

    osc.connect(gain);
    gain.connect(ctx.destination);

    osc.start();
    osc.stop(ctx.currentTime+duration/1000);
}

function playWinSound(){
    const ctx=new AudioContext();

    const osc=ctx.createOscillator();
    const gain=ctx.createGain();

    osc.type="sine";
    osc.frequency.setValueAtTime(800, ctx.currentTime);
    osc.frequency.exponentialRampToValueAtTime(1200, ctx.currentTime+0.3);

    gain.gain.setValueAtTime(0.5, ctx.currentTime);
    gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime+1);

    osc.connect(gain);
    gain.connect(ctx.destination);

    osc.start();
    osc.stop(ctx.currentTime+1);
}
let currentPosition = 0;
    
function start(){

    if(spinning) return;

    spinning=true;

    playSpinSound(3500);

    const itemHeight = 80;
    const total = menus.length;

    const winnerIndex = Math.floor(Math.random()*total);

    const extraSpin = total * 10;

    const moveAmount = (winnerIndex + extraSpin) * itemHeight;

    currentPosition += moveAmount;

    list.style.transition = "transform 3.5s cubic-bezier(.1,.7,.1,1)";
    list.style.transform = `translateY(-${currentPosition}px)`;

    setTimeout(()=>{

        const items=document.querySelectorAll(".menu-item");

        items.forEach(i=>i.classList.remove("winner"));

        const visualIndex = Math.floor(currentPosition / itemHeight);

        items[visualIndex].classList.add("winner");

        playWinSound();

        spinning=false;

    },3500);

}
</script>

</body>
</html>



